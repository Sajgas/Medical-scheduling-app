<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ux_client_script">
    <sys_ux_client_script action="INSERT_OR_UPDATE">
        <includes/>
        <macroponent display_value="Doctor">a00a8c0d877330104b3840cf8bbb35f2</macroponent>
        <name>Add date</name>
        <required_translations>[ ]</required_translations>
        <script><![CDATA[/**
 * @param {params} params
 * @param {api} params.api
 * @param {any} params.event
 * @param {any} params.imports
 * @param {ApiHelpers} params.helpers
 */
function handler({
    api,
    event,
    helpers,
    imports
}) {
    const inputDate = api.state.calendarValue;
    const inputTime = api.state.appointmentTime;
    
    //const firstName = api.state.firstName;
    //const lastName = api.state.lastName;
    const name = api.context.session.user.sys_id;

    const phoneNumber = api.state.phoneNumber;
    const emailAddress = api.state.emailAddress;
    
    const cholesterol = api.state.cholesterol;
    const diabetes = api.state.diabetes;
    const blood = api.state.blood;
    const depression = api.state.depression;
    const hospital = api.state.hospital;
    const alcohol = api.state.alcohol;
    const caffeine = api.state.caffeine;
    const physical = api.state.physical;
    const smoke = api.state.smoke;
    const other = api.state.other;

    const doctorName = api.data.glide_form_1.nowRecordFormBlob.fields.name.displayValue;
    const doctorAddress = api.data.glide_form_1.nowRecordFormBlob.fields.address.displayValue;
    const doctorCity = api.data.glide_form_1.nowRecordFormBlob.fields.city.displayValue;

    const templateFields = 'appointment_date=' + inputDate + '^doctor_name=' + doctorName + '^phone_number=' + phoneNumber + '^email_address=' + emailAddress + '^city=' + doctorCity + '^address=' + doctorAddress + '^appointment_time=' + inputTime + '^ref=' + name + '^high_cholesterol=' + cholesterol + '^diabetes=' + diabetes + '^blood=' + blood + '^depression=' + depression + '^hospital=' + hospital + '^alcohol=' + alcohol + '^caffeine=' + caffeine + '^physical=' + physical + '^smoke=' + smoke + '^other=' + other;


    api.data.create_record_1.execute({
        "table": "x_549153_medical_0_scheduled_appointments",
        "templateFields": templateFields,
    });


}]]></script>
        <script_api_version>2.0.0</script_api_version>
        <sys_class_name>sys_ux_client_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-11-21 16:52:30</sys_created_on>
        <sys_id>1f82641c874041104b3840cf8bbb3548</sys_id>
        <sys_mod_count>81</sys_mod_count>
        <sys_name>Add date</sys_name>
        <sys_package display_value="Medical Appointment" source="x_549153_medical_0">e2a538b7872770104b3840cf8bbb3536</sys_package>
        <sys_policy/>
        <sys_scope display_value="Medical Appointment">e2a538b7872770104b3840cf8bbb3536</sys_scope>
        <sys_update_name>sys_ux_client_script_1f82641c874041104b3840cf8bbb3548</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-11-27 14:21:37</sys_updated_on>
    </sys_ux_client_script>
</record_update>
